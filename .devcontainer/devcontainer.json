{
	"name": "Threshold Dev",
	"dockerFile": "Dockerfile",
	"forwardPorts": [
		5173,
		1420
	],
	"runArgs": [
		"--device=/dev/snd",
		"--group-add=audio",
		"--env=PULSE_SERVER=unix:/run/user/1000/pulse/native",
		"--volume=/run/user/1000/pulse/native:/run/user/1000/pulse/native"
	],
	
	// Mount keystore directory from host (read-only for security)
	// Comment out on machines without ~/threshold-keys/ (like laptop)
	// git update-index --assume-unchanged .devcontainer/devcontainer.json
	"mounts": [
		"source=${localEnv:HOME}/threshold-keys,target=/keys,type=bind,readonly"
	],
	
	"customizations": {
		"vscode": {
			"extensions": [
				"rust-lang.rust-analyzer",
				"esbenp.prettier-vscode",
				"dbaeumer.vscode-eslint",
				"tauri-apps.tauri-vscode",
				"ms-vscode.vscode-typescript-next",
				"streetsidesoftware.code-spell-checker"
			],
			"settings": {
				"files.exclude": {
					"**/*.jks": true,
					"**/*.keystore": true,
					"**/keystore.properties": true
				},
				"files.watcherExclude": {
					"**/*.jks": true,
					"**/*.keystore": true
				}
			}
		}
	},
	"postCreateCommand": "pnpm install"
}